!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app-compat"),require("@firebase/auth/internal"),require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app-compat","@firebase/auth/internal","@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase,e.exp,e.firebase.INTERNAL.modularAPIs)}(this,function(ot,st,at){"use strict";try{!function(){function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=e(ot),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function s(e,s,a,u){return new(a=a||Promise)(function(r,t){function i(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(i,n)}o((u=u.apply(e,s||[])).next())})}function l(r,i){var n,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=i.call(r,a)}catch(e){t=[6,e],o=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function a(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e}var t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],n=0;n<e.length;n+=3){var o=e[n],s=n+1<e.length,a=s?e[n+1]:0,u=n+2<e.length,l=u?e[n+2]:0,c=(15&a)<<2|l>>6,l=63&l;u||(l=64,s||(c=64)),i.push(r[o>>2],r[(3&o)<<4|a>>4],r[c],r[l])}return i.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){for(var t=[],r=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(55296==(64512&n)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128)}return t}(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],r=0,i=0;r<e.length;){var n,o,s,a=e[r++];a<128?t[i++]=String.fromCharCode(a):191<a&&a<224?(o=e[r++],t[i++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(n=((7&a)<<18|(63&(o=e[r++]))<<12|(63&(s=e[r++]))<<6|63&e[r++])-65536,t[i++]=String.fromCharCode(55296+(n>>10)),t[i++]=String.fromCharCode(56320+(1023&n))):(o=e[r++],s=e[r++],t[i++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var r=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],n=0;n<e.length;){var o=r[e.charAt(n++)],s=n<e.length?r[e.charAt(n)]:0,a=++n<e.length?r[e.charAt(n)]:64,u=++n<e.length?r[e.charAt(n)]:64;if(++n,null==o||null==s||null==a||null==u)throw Error();i.push(o<<2|s>>4),64!==a&&(i.push(s<<4&240|a>>2),64!==u&&i.push(a<<6&192|u))}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return t.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function r(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function d(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){return"indexedDB"in self&&null!=indexedDB}var f,g="FirebaseError",v=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(_,f=Error),_);function _(e,t,r){t=f.call(this,t)||this;return t.code=e,t.customData=r,t.name=g,Object.setPrototypeOf(t,_.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,y.prototype.create),t}var y=(m.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i,n=t[0]||{},o=this.service+"/"+e,e=this.errors[e],e=e?(i=n,e.replace(I,function(e,t){var r=i[t];return null!=r?String(r):"<"+t+"?>"})):"Error",e=this.serviceName+": "+e+" ("+o+").";return new v(o,e,n)},m);function m(e,t,r){this.service=e,this.serviceName=t,this.errors=r}var I=/\{\$([^}]+)}/g;function b(e){for(var r=[],t=0,i=Object.entries(e);t<i.length;t++){var n=i[t];!function(t,e){Array.isArray(e)?e.forEach(function(e){r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}(n[0],n[1])}return r.length?"&"+r.join("&"):""}var E,A=(R.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},R.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},R.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},R.prototype.subscribe=function(e,t,r){var i,n=this;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!=typeof e||null===e)return!1;for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n in e&&"function"==typeof e[n])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(i.next=T),void 0===i.error&&(i.error=T),void 0===i.complete&&(i.complete=T);r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{n.finalError?i.error(n.finalError):i.complete()}catch(e){}}),this.observers.push(i),r},R.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},R.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},R.prototype.sendOne=function(e,t){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[e])try{t(r.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},R.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},R);function R(e,t){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(r)}).catch(function(e){r.error(e)})}function T(){}function N(e){return e&&e._delegate?e._delegate:e}(k=E=E||{})[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT";function O(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(t<e.logLevel)){var n=(new Date).toISOString(),o=P[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,a(["["+n+"]  "+e.name+":"],r))}}var S={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},w=E.INFO,P=((k={})[E.DEBUG]="log",k[E.VERBOSE]="log",k[E.INFO]="info",k[E.WARN]="warn",k[E.ERROR]="error",k),k=(Object.defineProperty(C.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in E))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),C.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?S[e]:e},Object.defineProperty(C.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),C.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,E.DEBUG],e)),this._logHandler.apply(this,a([this,E.DEBUG],e))},C.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,E.VERBOSE],e)),this._logHandler.apply(this,a([this,E.VERBOSE],e))},C.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,E.INFO],e)),this._logHandler.apply(this,a([this,E.INFO],e))},C.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,E.WARN],e)),this._logHandler.apply(this,a([this,E.WARN],e))},C.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,E.ERROR],e)),this._logHandler.apply(this,a([this,E.ERROR],e))},C);function C(e){this.name=e,this._logLevel=w,this._logHandler=O,this._userLogHandler=null}var L=(D.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},D.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},D.prototype.setServiceProps=function(e){return this.serviceProps=e,this},D.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},D);function D(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}const U=new y("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),M=new k("@firebase/auth-exp");function F(e,...t){M.logLevel<=E.ERROR&&M.error(`Auth (${at.SDK_VERSION}): ${e}`,...t)}function V(e,...t){throw x(e,...t)}function W(e,...t){return x(e,...t)}function x(e,...t){if("string"==typeof e)return U.create(e,...t);{var r=t[0];const i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(r,...i)}}function j(e,t,...r){if(!e)throw x(t,...r)}function B(e){e="INTERNAL ASSERTION FAILED: "+e;throw F(e),new Error(e)}function H(e,t){e||B(t)}const z=new Map;function G(e){H(e instanceof Function,"Expected a class definition");let t=z.get(e);return t?H(t instanceof e,"Instance stored in cache mismatched with class"):(t=new e,z.set(e,t)),t}function K(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function J(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===K()||"https:"===K()||r()||"connection"in navigator))||navigator.onLine}class ${constructor(e,t){H((this.shortDelay=e)<(this.longDelay=t),"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())||d()}get(){return J()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Y{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl||("undefined"!=typeof self&&"fetch"in self?self.fetch:void B("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill"))}static headers(){return this.headersImpl||("undefined"!=typeof self&&"Headers"in self?self.Headers:void B("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill"))}static response(){return this.responseImpl||("undefined"!=typeof self&&"Response"in self?self.Response:void B("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill"))}}const q={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},X=new $(3e4,6e4);async function Z(n,o,s,a,e={}){return Q(n,e,()=>{let e={},t={};a&&("GET"===o?t=a:e={body:JSON.stringify(a)});var r=b(Object.assign({key:n.config.apiKey},t)).slice(1);const i=new(Y.headers());return i.set("Content-Type","application/json"),i.set("X-Client-Version",n._getSdkClientVersion()),n.languageCode&&i.set("X-Firebase-Locale",n.languageCode),Y.fetch()(ee(n,n.config.apiHost,s,r),Object.assign({method:o,headers:i,referrerPolicy:"no-referrer"},e))})}async function Q(t,e,r){t._canInitEmulator=!1;e=Object.assign(Object.assign({},q),e);try{const n=new te(t),o=await Promise.race([r(),n.promise]);n.clearNetworkTimeout();var i=await o.json();if("needConfirmation"in i)throw re(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const s=o.ok?i.errorMessage:i.error.message,a=s.split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===a)throw re(t,"credential-already-in-use",i);if("EMAIL_EXISTS"===a)throw re(t,"email-already-in-use",i);V(t,e[a]||a.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(e){if(e instanceof v)throw e;V(t,"network-request-failed")}}function ee(e,t,r,i){i=`${t}${r}?${i}`;return e.config.emulator?function(e,t){H(e.emulator,"Emulator should always be set here");var{url:e}=e.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}(e.config,i):`${e.config.apiScheme}://${i}`}class te{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(W(this.auth,"timeout")),X.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function re(e,t,r){const i={appName:e.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const n=W(e,t,i);return n.customData._tokenResponse=r,n}function ie(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function ne(e){return 1e3*Number(e)}function oe(e){var[t,r,e]=e.split(".");if(void 0===t||void 0===r||void 0===e)return F("JWT malformed, contained fewer than 3 sections"),null;try{var i=u(r);return i?JSON.parse(i):(F("Failed to decode base64 JWT payload"),null)}catch(e){return F("Caught error parsing JWT payload as JSON",e),null}}async function se(t,r,e=!1){if(e)return r;try{return await r}catch(e){throw e instanceof v&&([{code:r}]=[e],"auth/user-disabled"===r||"auth/user-token-expired"===r)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class ae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){var t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}this.errorBackoff=3e4;t=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,t)}schedule(e=!1){this.isRunning&&(e=this.getInterval(e),this.timerId=setTimeout(async()=>{await this.iteration()},e))}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class ue{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ie(this.lastLoginAt),this.creationTime=ie(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function le(e){var t=e.auth,r=await e.getIdToken(),i=await se(e,async function(e,t){return Z(e,"POST","/v1/accounts:lookup",t)}(t,{idToken:r}));j(null==i?void 0:i.users.length,t,"internal-error");var n=i.users[0];e._notifyReloadListener(n);t=null!==(r=n.providerUserInfo)&&void 0!==r&&r.length?n.providerUserInfo.map(e=>{var{providerId:t}=e,e=o(e,["providerId"]);return{providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}}):[],i=function(e,r){e=e.filter(t=>!r.some(e=>e.providerId===t.providerId));return[...e,...r]}(e.providerData,t),r=e.isAnonymous,t=!(e.email&&n.passwordHash||null!=i&&i.length),t=!!r&&t,t={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new ue(n.createdAt,n.lastLoginAt),isAnonymous:t};Object.assign(e,t)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(void 0!==e.idToken,"internal-error"),j(void 0!==e.refreshToken,"internal-error");var t,t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(j(t=oe(t=e.idToken),"internal-error"),j(void 0!==t.exp,"internal-error"),j(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return j(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){var i,n,{accessToken:t,refreshToken:e,expiresIn:r}=(n=t,await{accessToken:(r=await Q(i=e,{},()=>{var e=b({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:t,apiKey:r}=i.config,r=ee(i,t,"/v1/token",`key=${r}`);return Y.fetch()(r,{method:"POST",headers:{"X-Client-Version":i._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})})).access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});this.updateTokensAndExpiration(t,e,Number(r))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){var{refreshToken:r,accessToken:i,expirationTime:t}=t;const n=new ce;return r&&(j("string"==typeof r,"internal-error",{appName:e}),n.refreshToken=r),i&&(j("string"==typeof i,"internal-error",{appName:e}),n.accessToken=i),t&&(j("number"==typeof t,"internal-error",{appName:e}),n.expirationTime=t),n}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return B("not implemented")}}function he(e,t){j("string"==typeof e||void 0===e,"internal-error",{appName:t})}class de{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,e=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=e.displayName||null,this.email=e.email||null,this.phoneNumber=e.phoneNumber||null,this.photoURL=e.photoURL||null,this.isAnonymous=e.isAnonymous||!1,this.metadata=new ue(e.createdAt||void 0,e.lastLoginAt||void 0)}async getIdToken(e){e=await se(this,this.stsTokenManager.getToken(this.auth,e));return j(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(e){return async function(e,t=!1){const r=N(e);var i=await r.getIdToken(t),n=oe(i);return j(n&&n.exp&&n.auth_time&&n.iat,r.auth,"internal-error"),e="object"==typeof n.firebase?n.firebase:void 0,t=null==e?void 0:e.sign_in_provider,{claims:n,token:i,authTime:ie(ne(n.auth_time)),issuedAtTime:ie(ne(n.iat)),expirationTime:ie(ne(n.exp)),signInProvider:t||null,signInSecondFactor:(null==e?void 0:e.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=N(e);await le(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new de(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await le(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){var e=await this.getIdToken();return await se(this,async function(e,t){return Z(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r=null!==(l=t.displayName)&&void 0!==l?l:void 0,i=null!==(s=t.email)&&void 0!==s?s:void 0,n=null!==(u=t.phoneNumber)&&void 0!==u?u:void 0,o=null!==(a=t.photoURL)&&void 0!==a?a:void 0,s=null!==(l=t.tenantId)&&void 0!==l?l:void 0,a=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,u=null!==(l=t.createdAt)&&void 0!==l?l:void 0,l=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0;const{uid:c,emailVerified:h,isAnonymous:d,providerData:p,stsTokenManager:f}=t;j(c&&f,e,"internal-error");t=ce.fromJSON(this.name,f);j("string"==typeof c,e,"internal-error"),he(r,e.name),he(i,e.name),j("boolean"==typeof h,e,"internal-error"),j("boolean"==typeof d,e,"internal-error"),he(n,e.name),he(o,e.name),he(s,e.name),he(a,e.name),he(u,e.name),he(l,e.name);const g=new de({uid:c,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:d,photoURL:o,phoneNumber:n,tenantId:s,stsTokenManager:t,createdAt:u,lastLoginAt:l});return p&&Array.isArray(p)&&(g.providerData=p.map(e=>Object.assign({},e))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t,r=!1){const i=new ce;i.updateFromServerResponse(t);r=new de({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await le(r),r}}class pe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){e=this.storage[e];return void 0===e?null:e}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pe.type="NONE";const fe=pe;function ge(e,t,r){return`firebase:${e}:${t}:${r}`}class ve{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;var{config:e,name:r}=this.auth;this.fullUserKey=ge(this.userKey,e.apiKey,r),this.fullPersistenceKey=ge("persistence",e.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){var e=await this.persistence._get(this.fullUserKey);return e?de._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence!==e){var t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ve(G(fe),e,r);let i=G(fe);for(const u of t)if(await u._isAvailable()){i=u;break}let n=null;const o=ge(r,e.config.apiKey,e.name);for(const l of t)try{var s=await l._get(o);if(s){var a=de._fromJSON(e,s);l!==i&&(n=a);break}}catch(e){}return n&&await i._set(o,n.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(e){}})),new ve(i,e,r)}}function _e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if([i=c()]=[t],/iemobile/i.test(i))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if([i=c()]=[t],/firefox\//i.test(i))return"Firefox";if(t.includes("silk/"))return"Silk";if([i=c()]=[t],/blackberry/i.test(i))return"Blackberry";if([i=c()]=[t],/webos/i.test(i))return"Webos";if(function(e=c()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}(t))return"Safari";if((t.includes("chrome/")||([r=c()]=[t],/crios\//i.test(r)))&&!t.includes("edge/"))return"Chrome";if([r=c()]=[t],/android/i.test(r))return"Android";var r,i,e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==e?void 0:e.length)?e[1]:"Other"}function ye(e,t=[]){let r;switch(e){case"Browser":r=_e(c());break;case"Worker":r=`${_e(c())}-${e}`;break;default:r=e}t=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${at.SDK_VERSION}/${t}`}class me{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ie(this),this.idTokenSubscription=new Ie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.redirectInitializerError=null,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=G(r)),this._initializationPromise=this.queue(async()=>{var e;this._deleted||(this.persistenceManager=await ve.create(this,t),this._deleted||(null!==(e=this._popupRedirectResolver)&&void 0!==e&&e._shouldInitProactively&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(r),this._deleted||(this._isInitialized=!0)))}),this._initializationPromise.then(()=>{if(this.redirectInitializerError)throw this.redirectInitializerError})}async _onStorageEvent(){if(!this._deleted){var e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e)return this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var t,r;let i=await this.assertedPersistence.getCurrentUser();return e&&this.config.authDomain&&(await this.getOrInitRedirectPersistenceManager(),t=null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,e=await this.tryRedirectSignIn(e),t&&t!==r||null==e||!e.user||(i=e.user)),i?i._redirectEventId?(j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){this.redirectInitializerError=e,await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await le(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?N(e):null;return t&&j(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(G(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new y("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){return this.redirectPersistenceManager||(j(e=e&&G(e)||this._popupRedirectResolver,this,"argument-error"),this.redirectPersistenceManager=await ve.create(this,[G(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()),this.redirectPersistenceManager}async _redirectUserForId(e){var t;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;this._isInitialized&&(this.idTokenSubscription.next(this.currentUser),e=null!==(e=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==e?e:null,this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser)))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const n="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return j(o,this,"internal-error"),o.then(()=>n(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),(this.currentUser=e)?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ye(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}class Ie{constructor(e){var t;this.auth=e,this.observer=null,this.addObserver=(t=new A(e=>this.observer=e,t)).subscribe.bind(t)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class be{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(t){var e;this.assertAuthConfigured(),this.internalListeners.has(t)||(e=this.auth.onIdTokenChanged(e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}),this.internalListeners.set(t,e),this.updateProactiveRefresh())}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){0<this.internalListeners.size?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}new $(3e4,6e4),new $(5e3,15e3);const Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};var Ae;new $(3e4,6e4),new $(2e3,1e4);Ae="Browser",at._registerComponent(new L("auth-exp",(e,{options:r})=>{e=e.getProvider("app-exp").getImmediate();const{apiKey:i,authDomain:n}=e.options;return(e=>{j(i&&!i.includes(":"),"invalid-api-key",{appName:e.name}),j(!(null!==n&&void 0!==n&&n.includes(":")),"argument-error",{appName:e.name});var t={apiKey:i,authDomain:n,clientPlatform:Ae,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ye(Ae)},t=new me(e,t);return function(e,t){const r=(null==t?void 0:t.persistence)||[];var i=(Array.isArray(r)?r:[r]).map(G);null!=t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(t,r),t})(e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{const i=e.getProvider("auth-internal");i.initialize()})),at._registerComponent(new L("auth-internal",e=>{e=N(e.getProvider("auth-exp").getImmediate());return e=e,new be(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),at.registerVersion("@firebase/auth-exp","0.0.900-exp.57f19127c",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ae));function Re(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Te(e){return void 0===e&&(e=c()),!("file:"!==Re()&&"ionic:"!==Re()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ne(){return(0<=(e=c()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))&&11===(null===document||void 0===document?void 0:document.documentMode);var e}function Oe(e){return void 0===e&&(e=c()),Ne()||(void 0===(e=e)&&(e=c()),/Edge\/\d+/.test(e))}function Se(){try{var e=self.localStorage,t=st._generateEventId();if(e)return e.setItem(t,"1"),e.removeItem(t),!Oe()||p()}catch(e){return we()&&p()}return!1}function we(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Pe(){return("http:"===Re()||"https:"===Re()||r()||Te())&&!(d()||h())&&Se()&&!we()}function ke(){return Te()&&"undefined"!=typeof document}var Ce={LOCAL:"local",NONE:"none",SESSION:"session"},Le=st._assert,De="persistence";function Ue(i){return s(this,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:return[4,i._initializationPromise];case 1:return e.sent(),t=Me(),r=st._persistenceKeyName(De,i.config.apiKey,i.name),null!=t&&t.sessionStorage&&t.sessionStorage.setItem(r,i._getPersistence()),[2]}})})}function Me(){return"undefined"!=typeof window?window:null}var Fe=st._assert,Ve=st._getInstance(st.browserPopupRedirectResolver),We=st._getInstance(st.cordovaPopupRedirectResolver),xe=(je.prototype._initialize=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,this.selectUnderlyingResolver()];case 1:return e.sent(),[2,this.assertedUnderlyingResolver._initialize(t)]}})})},je.prototype._openPopup=function(t,r,i,n){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,this.selectUnderlyingResolver()];case 1:return e.sent(),[2,this.assertedUnderlyingResolver._openPopup(t,r,i,n)]}})})},je.prototype._openRedirect=function(t,r,i,n){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,this.selectUnderlyingResolver()];case 1:return e.sent(),[2,this.assertedUnderlyingResolver._openRedirect(t,r,i,n)]}})})},je.prototype._isIframeWebStorageSupported=function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)},je.prototype._originValidation=function(e){return this.assertedUnderlyingResolver._originValidation(e)},Object.defineProperty(je.prototype,"_shouldInitProactively",{get:function(){return ke()||Ve._shouldInitProactively},enumerable:!1,configurable:!0}),Object.defineProperty(je.prototype,"assertedUnderlyingResolver",{get:function(){return Fe(this.underlyingResolver,"internal-error"),this.underlyingResolver},enumerable:!1,configurable:!0}),je.prototype.selectUnderlyingResolver=function(){return s(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return this.underlyingResolver?[2]:[4,function(){return s(this,void 0,void 0,function(){return l(this,function(e){return ke()?[2,new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})})]:[2,!1]})})}()];case 1:return t=e.sent(),this.underlyingResolver=t?We:Ve,[2]}})})},je);function je(){this.underlyingResolver=null,this._redirectPersistence=st.browserSessionPersistence,this._completeRedirectFn=st._getRedirectResult}function Be(e){var t=(e instanceof v?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof v)&&"temporaryProof"in t&&"phoneNumber"in t)return st.PhoneAuthProvider.credentialFromResult(e);var r,i=t.providerId;if(!i||i===st.ProviderId.PASSWORD)return null;switch(i){case st.ProviderId.GOOGLE:r=st.GoogleAuthProvider;break;case st.ProviderId.FACEBOOK:r=st.FacebookAuthProvider;break;case st.ProviderId.GITHUB:r=st.GithubAuthProvider;break;case st.ProviderId.TWITTER:r=st.TwitterAuthProvider;break;default:var n=t.oauthIdToken,o=t.oauthAccessToken,s=t.oauthTokenSecret,a=t.pendingToken,u=t.nonce;return o||s||n||a?a?i.startsWith("saml.")?st.SAMLAuthCredential._create(i,a):st.OAuthCredential._fromParams({providerId:i,signInMethod:i,pendingToken:a,idToken:n,accessToken:o}):new st.OAuthProvider(i).credential({idToken:n,accessToken:o,rawNonce:u}):null}return e instanceof v?r.credentialFromError(e):r.credentialFromResult(e)}function He(a,u){return s(this,void 0,void 0,function(){var n,o,s;return l(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,u];case 1:return n=e.sent(),[3,3];case 2:throw(s=e.sent())instanceof v&&(t=a,i=null===(i=(r=s).customData)||void 0===i?void 0:i._tokenResponse,"auth/multi-factor-auth-required"===r.code?r.resolver=new Ge(t,st.getMultiFactorResolver(t,r)):!i||(r=Be(t=r))&&(t.credential=r,t.tenantId=i.tenantId||void 0,t.email=i.email||void 0,t.phoneNumber=i.phoneNumber||void 0)),s;case 3:return o=n.operationType,s=n.user,[2,{operationType:o,credential:Be(n),additionalUserInfo:st.getAdditionalUserInfo(n),user:Je.getOrCreate(s)}]}var t,r,i})})}function ze(r,i){return s(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return[4,i];case 1:return[2,{verificationId:(t=e.sent()).verificationId,confirm:function(e){return He(r,t.confirm(e))}}]}})})}var Ge=(Object.defineProperty(Ke.prototype,"session",{get:function(){return this.resolver.session},enumerable:!1,configurable:!0}),Object.defineProperty(Ke.prototype,"hints",{get:function(){return this.resolver.hints},enumerable:!1,configurable:!0}),Ke.prototype.resolveSignIn=function(e){return He(this.auth.unwrap(),this.resolver.resolveSignIn(e))},Ke);function Ke(e,t){this.resolver=t,this.auth=e.wrapped()}var Je=($e.getOrCreate=function(e){return $e.USER_MAP.has(e)||$e.USER_MAP.set(e,new $e(e)),$e.USER_MAP.get(e)},$e.prototype.delete=function(){return this._delegate.delete()},$e.prototype.reload=function(){return this._delegate.reload()},$e.prototype.toJSON=function(){return this._delegate.toJSON()},$e.prototype.getIdTokenResult=function(e){return this._delegate.getIdTokenResult(e)},$e.prototype.getIdToken=function(e){return this._delegate.getIdToken(e)},$e.prototype.linkAndRetrieveDataWithCredential=function(e){return this.linkWithCredential(e)},$e.prototype.linkWithCredential=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,He(this.auth,st.linkWithCredential(this._delegate,t))]})})},$e.prototype.linkWithPhoneNumber=function(t,r){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,ze(this.auth,st.linkWithPhoneNumber(this._delegate,t,r))]})})},$e.prototype.linkWithPopup=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,He(this.auth,st.linkWithPopup(this._delegate,t,xe))]})})},$e.prototype.linkWithRedirect=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,Ue(st._castAuth(this.auth))];case 1:return e.sent(),[2,st.linkWithRedirect(this._delegate,t,xe)]}})})},$e.prototype.reauthenticateAndRetrieveDataWithCredential=function(e){return this.reauthenticateWithCredential(e)},$e.prototype.reauthenticateWithCredential=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,He(this.auth,st.reauthenticateWithCredential(this._delegate,t))]})})},$e.prototype.reauthenticateWithPhoneNumber=function(e,t){return ze(this.auth,st.reauthenticateWithPhoneNumber(this._delegate,e,t))},$e.prototype.reauthenticateWithPopup=function(e){return He(this.auth,st.reauthenticateWithPopup(this._delegate,e,xe))},$e.prototype.reauthenticateWithRedirect=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,Ue(st._castAuth(this.auth))];case 1:return e.sent(),[2,st.reauthenticateWithRedirect(this._delegate,t,xe)]}})})},$e.prototype.sendEmailVerification=function(e){return st.sendEmailVerification(this._delegate,e)},$e.prototype.unlink=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,st.unlink(this._delegate,t)];case 1:return e.sent(),[2,this]}})})},$e.prototype.updateEmail=function(e){return st.updateEmail(this._delegate,e)},$e.prototype.updatePassword=function(e){return st.updatePassword(this._delegate,e)},$e.prototype.updatePhoneNumber=function(e){return st.updatePhoneNumber(this._delegate,e)},$e.prototype.updateProfile=function(e){return st.updateProfile(this._delegate,e)},$e.prototype.verifyBeforeUpdateEmail=function(e,t){return st.verifyBeforeUpdateEmail(this._delegate,e,t)},Object.defineProperty($e.prototype,"emailVerified",{get:function(){return this._delegate.emailVerified},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"isAnonymous",{get:function(){return this._delegate.isAnonymous},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"phoneNumber",{get:function(){return this._delegate.phoneNumber},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"providerData",{get:function(){return this._delegate.providerData},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"refreshToken",{get:function(){return this._delegate.refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"tenantId",{get:function(){return this._delegate.tenantId},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"displayName",{get:function(){return this._delegate.displayName},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"email",{get:function(){return this._delegate.email},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"photoURL",{get:function(){return this._delegate.photoURL},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"providerId",{get:function(){return this._delegate.providerId},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"uid",{get:function(){return this._delegate.uid},enumerable:!1,configurable:!0}),Object.defineProperty($e.prototype,"auth",{get:function(){return this._delegate.auth},enumerable:!1,configurable:!0}),$e.USER_MAP=new WeakMap,$e);function $e(e){this._delegate=e,this.multiFactor=st.multiFactor(e)}var Ye=st._assert,qe=(Object.defineProperty(Xe.prototype,"emulatorConfig",{get:function(){return this._delegate.emulatorConfig},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"currentUser",{get:function(){return this._delegate.currentUser?Je.getOrCreate(this._delegate.currentUser):null},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"languageCode",{get:function(){return this._delegate.languageCode},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"settings",{get:function(){return this._delegate.settings},enumerable:!1,configurable:!0}),Object.defineProperty(Xe.prototype,"tenantId",{get:function(){return this._delegate.tenantId},enumerable:!1,configurable:!0}),Xe.prototype.useDeviceLanguage=function(){this._delegate.useDeviceLanguage()},Xe.prototype.signOut=function(){return this._delegate.signOut()},Xe.prototype.useEmulator=function(e,t){st.useAuthEmulator(this._delegate,e,t)},Xe.prototype.applyActionCode=function(e){return st.applyActionCode(this._delegate,e)},Xe.prototype.checkActionCode=function(e){return st.checkActionCode(this._delegate,e)},Xe.prototype.confirmPasswordReset=function(e,t){return st.confirmPasswordReset(this._delegate,e,t)},Xe.prototype.createUserWithEmailAndPassword=function(t,r){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,He(this._delegate,st.createUserWithEmailAndPassword(this._delegate,t,r))]})})},Xe.prototype.fetchProvidersForEmail=function(e){return this.fetchSignInMethodsForEmail(e)},Xe.prototype.fetchSignInMethodsForEmail=function(e){return st.fetchSignInMethodsForEmail(this._delegate,e)},Xe.prototype.isSignInWithEmailLink=function(e){return st.isSignInWithEmailLink(this._delegate,e)},Xe.prototype.getRedirectResult=function(){return s(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return Ye(Pe(),this._delegate,"operation-not-supported-in-this-environment"),[4,st.getRedirectResult(this._delegate,xe)];case 1:return(t=e.sent())?[2,He(this._delegate,Promise.resolve(t))]:[2,{credential:null,user:null}]}})})},Xe.prototype.addFrameworkForLogging=function(e){st.addFrameworkForLogging(this._delegate,e)},Xe.prototype.onAuthStateChanged=function(e,t,r){e=Ze(e,t,r),t=e.next,r=e.error,e=e.complete;return this._delegate.onAuthStateChanged(t,r,e)},Xe.prototype.onIdTokenChanged=function(e,t,r){e=Ze(e,t,r),t=e.next,r=e.error,e=e.complete;return this._delegate.onIdTokenChanged(t,r,e)},Xe.prototype.sendSignInLinkToEmail=function(e,t){return st.sendSignInLinkToEmail(this._delegate,e,t)},Xe.prototype.sendPasswordResetEmail=function(e,t){return st.sendPasswordResetEmail(this._delegate,e,t||void 0)},Xe.prototype.setPersistence=function(o){return s(this,void 0,void 0,function(){var i,n;return l(this,function(e){switch(e.label){case 0:switch(t=this._delegate,r=o,Le(Object.values(Ce).includes(r),t,"invalid-persistence-type"),d()?Le(r!==Ce.SESSION,t,"unsupported-persistence-type"):h()?Le(r===Ce.NONE,t,"unsupported-persistence-type"):we()?Le(r===Ce.NONE||r===Ce.LOCAL&&p(),t,"unsupported-persistence-type"):Le(r===Ce.NONE||Se(),t,"unsupported-persistence-type"),o){case Ce.SESSION:return[3,1];case Ce.LOCAL:return[3,2];case Ce.NONE:return[3,4]}return[3,5];case 1:return i=st.browserSessionPersistence,[3,6];case 2:return[4,st._getInstance(st.indexedDBLocalPersistence)._isAvailable()];case 3:return n=e.sent(),i=n?st.indexedDBLocalPersistence:st.browserLocalPersistence,[3,6];case 4:return i=st.inMemoryPersistence,[3,6];case 5:return[2,st._fail("argument-error",{appName:this._delegate.name})];case 6:return[2,this._delegate.setPersistence(i)]}var t,r})})},Xe.prototype.signInAndRetrieveDataWithCredential=function(e){return this.signInWithCredential(e)},Xe.prototype.signInAnonymously=function(){return He(this._delegate,st.signInAnonymously(this._delegate))},Xe.prototype.signInWithCredential=function(e){return He(this._delegate,st.signInWithCredential(this._delegate,e))},Xe.prototype.signInWithCustomToken=function(e){return He(this._delegate,st.signInWithCustomToken(this._delegate,e))},Xe.prototype.signInWithEmailAndPassword=function(e,t){return He(this._delegate,st.signInWithEmailAndPassword(this._delegate,e,t))},Xe.prototype.signInWithEmailLink=function(e,t){return He(this._delegate,st.signInWithEmailLink(this._delegate,e,t))},Xe.prototype.signInWithPhoneNumber=function(e,t){return ze(this._delegate,st.signInWithPhoneNumber(this._delegate,e,t))},Xe.prototype.signInWithPopup=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){return Ye(Pe(),this._delegate,"operation-not-supported-in-this-environment"),[2,He(this._delegate,st.signInWithPopup(this._delegate,t,xe))]})})},Xe.prototype.signInWithRedirect=function(t){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return Ye(Pe(),this._delegate,"operation-not-supported-in-this-environment"),[4,Ue(this._delegate)];case 1:return e.sent(),[2,st.signInWithRedirect(this._delegate,t,xe)]}})})},Xe.prototype.updateCurrentUser=function(e){return this._delegate.updateCurrentUser(e)},Xe.prototype.verifyPasswordResetCode=function(e){return st.verifyPasswordResetCode(this._delegate,e)},Xe.prototype.unwrap=function(){return this._delegate},Xe.prototype._delete=function(){return this._delegate._delete()},Xe.prototype.linkUnderlyingAuth=function(){var e=this;this._delegate.wrapped=function(){return e}},Xe);function Xe(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();var r=e.options.apiKey;Ye(r,"invalid-api-key",{appName:e.name});var i=[st.inMemoryPersistence];if("undefined"!=typeof window)for(var i=function(e,t){var r=Me();if(null==r||!r.sessionStorage)return[];switch(t=st._persistenceKeyName(De,e,t),r.sessionStorage.getItem(t)){case Ce.NONE:return[st.inMemoryPersistence];case Ce.LOCAL:return[st.indexedDBLocalPersistence,st.browserSessionPersistence];case Ce.SESSION:return[st.browserSessionPersistence];default:return[]}}(r,e.name),n=0,o=[st.indexedDBLocalPersistence,st.browserLocalPersistence];n<o.length;n++){var s=o[n];i.includes(s)||i.push(s)}Ye(r,"invalid-api-key",{appName:e.name});e="undefined"!=typeof window?xe:void 0;this._delegate=t.initialize({options:{persistence:i,popupRedirectResolver:e}}),this._delegate._updateErrorMap(st.debugErrorMap),this.linkUnderlyingAuth()}function Ze(e,t,r){var i=e;"function"!=typeof e&&(i=e.next,t=e.error,r=e.complete);var n=i;return{next:function(e){return n(e&&Je.getOrCreate(e))},error:t,complete:r}}var Qe=(et.credential=function(e,t){return st.PhoneAuthProvider.credential(e,t)},et.prototype.verifyPhoneNumber=function(e,t){return this._delegate.verifyPhoneNumber(e,t)},et.prototype.unwrap=function(){return this._delegate},et.PHONE_SIGN_IN_METHOD=st.PhoneAuthProvider.PHONE_SIGN_IN_METHOD,et.PROVIDER_ID=st.PhoneAuthProvider.PROVIDER_ID,et);function et(){this.providerId="phone",this._delegate=new st.PhoneAuthProvider(unwrap(n.default.auth()))}var tt=st._assert,rt=(it.prototype.clear=function(){this._delegate.clear()},it.prototype.render=function(){return this._delegate.render()},it.prototype.verify=function(){return this._delegate.verify()},it);function it(e,t,r){var i;void 0===r&&(r=n.default.app()),tt(null===(i=r.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new st.RecaptchaVerifier(e,t,r.auth()),this.type=this._delegate.type}var nt;(nt=n.default).INTERNAL.registerComponent(new L("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),e=e.getProvider("auth-exp");return new qe(t,e)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ee.EMAIL_SIGNIN,PASSWORD_RESET:Ee.PASSWORD_RESET,RECOVER_EMAIL:Ee.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ee.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ee.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ee.VERIFY_EMAIL}},EmailAuthProvider:st.EmailAuthProvider,FacebookAuthProvider:st.FacebookAuthProvider,GithubAuthProvider:st.GithubAuthProvider,GoogleAuthProvider:st.GoogleAuthProvider,OAuthProvider:st.OAuthProvider,PhoneAuthProvider:Qe,PhoneMultiFactorGenerator:st.PhoneMultiFactorGenerator,RecaptchaVerifier:rt,TwitterAuthProvider:st.TwitterAuthProvider,Auth:{Persistence:Ce},AuthCredential:st.AuthCredential}).setInstantiationMode("LAZY").setMultipleInstances(!1)),nt.registerVersion("@firebase/auth-compat","0.0.900-exp.57f19127c")}.apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-auth.js - be sure to load firebase-app.js first.")}});//# sourceMappingURL=firebase-auth.js.map
